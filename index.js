let currentDate,numberOfMovements,records=[],isEditing=!1;function main(){loadFromLocalStorage(),renderDate(),renderRecords(),updateNumberOfMovements(),renderNumberOfMovements();let e=document.querySelectorAll(".movement__button");for(const t of e)t.addEventListener("click",recordMovement),t.addEventListener("click",saveToLocalStorage);let t=document.querySelector(".clear__button");t.addEventListener("click",clearEntries),t.addEventListener("click",saveToLocalStorage),document.querySelector(".record__button--edit").addEventListener("click",editEntries)}function recordMovement(){addEntry(this.innerHTML),updateNumberOfMovements()}function addEntry(e){let t=addKey(),r=getCurrentTime();records.push({key:t,time:r,intensity:e});let n=addTimeNode(),d=addIntensityNode(),o=addButtonNode(t);n.appendChild(document.createTextNode(r)),d.appendChild(document.createTextNode(e));let a=addRowNode();a.appendChild(n),a.appendChild(d),a.appendChild(o),document.getElementById("record").appendChild(a)}function editEntries(){console.log("Edit pressed"),isEditing=!1===isEditing,0!==records.length?toggleButtons():alert("Nothing to edit!")}function deleteEntry(){if(console.log("Delete pressed"),confirm("Delete this data?")){let e=this.parentNode.parentNode;e.parentNode.removeChild(e),records=records.filter(e=>e.key!==this.getAttribute("key"))}toggleButtons()}function clearEntries(){confirm("Clear all records?")&&(records=[],isEditing=!1,toggleButtons(),updateNumberOfMovements(),renderRecords(),console.log("Clear all pressed"))}function getCurrentTime(){let e=new Date,t=e.getHours(),r=t<13?t:t-12,n=e.getMinutes();return`${r}:${n<10?`0${n}`:n} ${t<12?"AM":"PM"}`}function getCurrentDate(){let e=new Date,t=e.getDate(),r=e.getMonth();switch(t){case 1:case 21:case 31:t=`${t}st`;break;case 2:case 22:t=`${t}nd`;break;case 3:case 23:t=`${t}rd`;break;default:t=`${t}th`}switch(r){case 0:r="Jan";break;case 1:r="Feb";break;case 2:r="Mar";break;case 3:r="Apr";break;case 4:r="May";break;case 5:r="Jun";break;case 6:r="Jul";break;case 7:r="Aug";break;case 8:r="Sep";break;case 9:r="Oct";break;case 10:r="Nov";break;case 11:r="Dec"}return`${t} ${r}`}function renderRecords(){if(records.length>0)records.map(e=>{let t=addRowNode(),r=addTimeNode(),n=addIntensityNode(),d=addButtonNode(e.key),o=document.createTextNode(e.time),a=document.createTextNode(e.intensity);r.appendChild(o),n.appendChild(a),t.appendChild(r),t.appendChild(n),t.appendChild(d),document.getElementById("record").appendChild(t)});else{let e=document.getElementById("record");for(;e.childElementCount>1;)e.removeChild(e.childNodes[2])}}function renderDate(){currentDate=getCurrentDate(),document.querySelector(".record-header__date").innerHTML=currentDate}function renderNumberOfMovements(){switch(text=document.querySelector(".record-header__tally"),numberOfMovements){case 0:text.innerHTML="Baby sleeping";break;case 1:text.innerHTML=`${numberOfMovements} movement`;break;default:text.innerHTML=`${numberOfMovements} movements`}}function toggleButtons(){let e=document.querySelectorAll(".record__button--trash");for(const t of e)t.style.visibility=!0===isEditing?"visible":"hidden";if(e.length>1){document.querySelector(".clear__Button").style.visibility=!0===isEditing?"visible":"hidden"}let t=document.querySelectorAll(".movement__button");for(const e of t)e.style.visibility=!1===isEditing?"visible":"hidden";if(0===records.length){for(const e of t)e.style.visibility="visible";isEditing=!1}else records.length<2&&(document.querySelector(".clear__Button").style.visibility="hidden")}function saveToLocalStorage(){localStorage.setItem("records",JSON.stringify(records)),localStorage.setItem("date",JSON.stringify(currentDate)),localStorage.setItem("numberOfMovements",JSON.stringify(numberOfMovements))}function loadFromLocalStorage(){localStorage.getItem("records")&&(records=JSON.parse(localStorage.getItem("records"))),localStorage.getItem("date")&&(currentDate=JSON.parse(localStorage.getItem("date"))),localStorage.getItem("numberOfMovements")&&(numberOfMovements=JSON.parse(localStorage.getItem("numberOfMovements")))}function addRowNode(){let e=document.createElement("TR");return e.classList.add("record__row"),e}function addTimeNode(){let e=document.createElement("TD");return e.classList.add("record__data"),e}function addIntensityNode(){let e=document.createElement("TD");return e.classList.add("record__data"),e}function addKey(){let e=new Date;return String(e.getTime())}function addButtonNode(e){let t=document.createElement("TD");t.classList.add("record__data");let r=addDeleteButton(),n=document.createAttribute("key");return n.value=e,r.setAttributeNode(n),t.appendChild(r),t}function addDeleteButton(){let e=document.createElement("i");return e.classList.add("far"),e.classList.add("fa-trash-alt"),e.classList.add("record__button"),e.classList.add("record__button--trash"),e.addEventListener("click",deleteEntry),e.addEventListener("click",updateNumberOfMovements),e.addEventListener("click",saveToLocalStorage),e}function updateNumberOfMovements(){numberOfMovements=records.length,renderNumberOfMovements()}